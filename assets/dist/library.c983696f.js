function rpc(){this.parameters=[],this.setErrorHandler(this._error)}function IntlConstruct(){var e={};return{lang:void 0,set:function(t,o){e[t+""]=o},setData:function(t){for(var o in t)e[o]=t[o+""]},get:function(t){return void 0!=e[t+""]?e[t+""]:t}}}function fixedHeaderSet(e,t,o,i){if(void 0==t&&(t=$("#fixedHeaderContainer")),void 0==i&&(i=$("#g"+e+"_journal")),void 0==o&&(o=$("#marker")),t.removeClass("hide").show(),1==i.length){var r=t.position(),n=o.position();void 0==r&&(r={top:0,left:0}),void 0==n&&(n={top:0,left:0}),window.startPosition=r.top-20,window.endPosition=n.top,window.fixedHeight=i.children("div").outerHeight(),height<10&&(window.height=i.children("table").outerHeight())}}function fixedHeaderRestore(e,t,o){void 0!=t&&0!=t.length||(t=$("#g"+e+"_journal")),void 0!=o&&0!=o.length||(o=$("#marker")),1==t.length&&($fixedHeaderContainer=$("#fixedHeaderContainer,.table_header_container:visible").first(),_fixedHeaderRestore(t,$fixedHeaderContainer,o))}function _fixedHeaderRestore(e,t,o){var i;1==e.length&&(void 0==(i=t.position())&&(i={top:0,left:0}),window.startPosition=i.top,void 0==(i=o.position())&&(i={top:0,left:0}),i&&(window.endPosition=i.top),window.height=e.children("div").outerHeight(),(void 0==window.height||null==window.height||window.height<10)&&(window.height=e.children("table").outerHeight()))}function showLoadingScreen(e,t){void 0!==e&&null!==e||(e=window.trans("action.loading")+"..."),void 0!==t&&null!==t||(t=!0),$("#loading-screen-caption").html(e),$("#loading-screen").addClass("loading-screen--visible").toggleClass("loading-screen--with-circle",t)}function hideLoadingScreen(){$("#loading-screen").removeClass("loading-screen--visible")}function base64_encode_unicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}function stringToSafeId(e){if(!e)return e;"string"!=typeof e&&(e=e.toString());var t=/[^a-zа-я0-9\-_:\.]|^[^a-z]+/gi,o=e.replace(t,"");return 0==o.length&&(o=(o=base64_encode_unicode(e)).replace(t,"")),o}function camelCaseToDash(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function createElementString(e,t,o){var i=[];return Object.keys(t).forEach(function(e){var o=t[e];void 0!==o&&null!==o&&!1!==o&&(!0!==o?i.push(window.camelCaseToDash(e)+'="'+o+'"'):i.push(window.camelCaseToDash(e)))}),o?"<"+e+" "+i.join(" ").trim()+">"+o+"</"+e+">":"<"+e+" "+i.join(" ").trim()+"/>"}rpc.prototype.controlExit=function(e,t){if(!($("#rpcloading").length>0)){window.onbeforeunload=function(){if($.active>0)return t},this.msg=e;var o=$("a").filter('[href!="#"][id!="teacher-rebuke"]:not(.has-modal):not(.ajax_ht):not(.cw_analyse):not(.get-kes-analyse):not(.ajax_add_lesson):not(.printjournal):not(.ajax_markprint)');o.each(function(){var e=$(this).data("events");void 0!=(e=e?e.click:void 0)&&0!=e.length||$(this).addClass("rpc-href").data("rpcControlExit",!0)}),o.filter(".rpc-href").on("click",function(e){$.active>0?(e.preventDefault(),alert(t)):$(this).data("rpcControlExit",!1)}).removeClass("rpc-href"),$("body").append('<div id="rpcloading">'+e+"</div>"),$("#rpcloading").hide(),$(document).ajaxStart(function(){$("#rpcloading").show()}).ajaxStop(function(){$("#rpcloading").hide()}).ajaxError(function(e,t,o,i){"Not Found"!==i&&confirm("Ошибка подключения: "+i)})}},rpc.prototype.callPool=function(e,t,o,i){var r=i||!1;try{$.ajax({url:e,success:t,error:o,async:!r})}catch(e){console.warn(e)}},rpc.prototype.setErrorHandler=function(e){this.error=e},rpc.prototype.action=function(e){for(arguments.length>1?parameters=arguments[1]:parameters=[],o=this.url+"?method="+e,i=0;i<parameters.length;i++)encodeURIComponent?p=encodeURIComponent(parameters[i]):p=escape(parameters[i]),o+="&"+i+"="+p;return o},rpc.prototype.addParameter=function(e,t){this.parameters.push([e,t])},rpc.prototype.post=function(e,t,o){for(params="",sep="",i=0;i<this.parameters.length;i++)encodeURIComponent?p=encodeURIComponent(this.parameters[i][1]):p=escape(this.parameters[i][1]),params+=sep+this.parameters[i][0]+"="+p,sep="&";try{$.ajax({type:"POST",url:e,data:params,error:o,success:t})}catch(e){console.warn(e)}this.parameters=[]},function(e,t,o){"use strict";var i=["mouseevent","activeclass","attribute","animation","autorotate","deeplinking","pauseonhover","delay","container"],r="> ul.ej-tabs__tabs > li.ej-tab:not(.ej-tab--plus)";e.fn.tabslet=function(t){t=e.extend({mouseevent:"click",activeclass:"active",attribute:"href",animation:!1,autorotate:!1,deeplinking:!1,pauseonhover:!0,delay:2e3,active:1,container:!1,controls:{prev:".prev",next:".next"},mini:!1},t);return this.each(function(){var o=e(this),n=[],l=t.container?e(t.container):o,a=(l=l.first()).find("> div.ej-tabs__panel");o.removeClass("ej-tabs--small"),o.removeClass("ej-tabs--big"),a.each(function(){n.push(e(this).hasClass("hide"))});var s=o.find(r),c=t.active-1,d=t.size||o.attr("size");if(t.small||"small"===d)o.addClass("ej-tabs--small");else if(t.big||"big"===d)o.addClass("ej-tabs--big");else{var u=o.width(),h=0;s.each(function(){h+=e(this).width()}),h>=u&&o.addClass("ej-tabs--small")}if(!o.data("tabslet-init")){o.data("tabslet-init",!0);var f,p=function(){s.off("click").on("click",function(i,r){i.preventDefault();var n=r?s.find("a["+o.opts.attribute+'="'+r+'"]').parent():e(this);n.trigger("_before"),s.removeClass(t.activeclass),n.addClass(t.activeclass),a.hideClassy(),c=s.index(n);var d=r||n.find("a").attr(o.opts.attribute);o.opts.deeplinking&&(location.hash=d),o.opts.animation?l.find(d).animate({opacity:"show"},"slow",function(){n.trigger("_after")}):(l.find(d).showClassy(),n.trigger("_after"))})};o.opts=[],e.map(i,function(e,i){o.opts[e]=o.data(e)||t[e]}),o.opts.active=o.opts.deeplinking?function(){var i=[];s.find("a").each(function(){i.push(e(this).attr(o.opts.attribute))});var r=i.indexOf(location.hash);return r>-1?r+1:o.data("active")||t.active}():o.data("active")||t.active,a.hideClassy(),o.opts.active&&(a.eq(o.opts.active-1).showClassy(),s.eq(o.opts.active-1).addClass(t.activeclass));var m=function(){c=++c%s.length,"hover"==o.opts.mouseevent?s.eq(c).trigger("mouseover"):s.eq(c).trigger("click"),o.opts.autorotate&&(clearTimeout(f),f=setTimeout(m,o.opts.delay),o.mouseover(function(){o.opts.pauseonhover&&clearTimeout(f)}))};o.opts.autorotate&&(f=setTimeout(m,o.opts.delay),o.hover(function(){o.opts.pauseonhover&&clearTimeout(f)},function(){f=setTimeout(m,o.opts.delay)}),o.opts.pauseonhover&&o.on("mouseleave",function(){clearTimeout(f),f=setTimeout(m,o.opts.delay)})),p();o.off("show").on("show",function(e,t){var o;e.stopPropagation(),o=t,o=Math.max(0,o),o=Math.min(o,s.length),s.eq(o).trigger("click")}),o.off("refresh").on("refresh",function(e){e.stopPropagation(),(a=l.find("> div.ej-tabs__panel")).hideClassy(),(s=o.find(r)).removeClass(t.activeclass),p(),s.last().trigger("click"),o.trigger("destroy"),o.data("tabslet-init",!1),o.tabslet()}),o.off("destroy").on("destroy",function(i){i.stopPropagation(),o.removeData().find(r).each(function(o){e(this).removeClass(t.activeclass)}),l.find("> div.ej-tabs__panel").each(function(t){e(this).toggleClassy(n[t])})})}})}}(jQuery),window.intl=IntlConstruct(),function(e){function t(e){return"none"!==e.css("display")}e.fn.colorizetable=function(t,o){return o=o||!1,e(this).each(function(){var i=!t,r=o?":visible":"";e(this).children(r).each(function(){e(this).toggleClass("trwhite",!i).toggleClass("trgray",i),i=!i})})},e.fn.disableBlock=function(t){return e(this).each(function(){var o=e(this).addClass("disable-block"),i=e('<div class="disabler"></div>'),r="disabler".concat(window.guidGenerator());function n(){var e=o.height(),t=o.width(),r=o.position();i.css({width:t,height:e,left:r.left})}e(this).data("disabler-id",r),"object"==typeof t&&null!==t&&t.color&&i.addClass("disabler--color"),o.on("disabler.click disabler.tap",function(e){e.preventDefault(),e.stopPropagation()}).before(i),!1!==t&&o.find("input,button,label").prop("disabled",!0),o.data("disabler",i),e(document.documentElement).on("onLoadJsReady",function(){n()}),e(window).on("resize.disabler",function(){n()}),n()})},e.fn.enableBlock=function(){return e(this).each(function(){var t=e(this).removeClass("disable-block"),o=t.data("disabler"),i=t.data("disabler-id");t.off(i.concat(".click")),t.off(i.concat(".tap")),o.remove(),e("body").off(i.concat(".onLoadJsReady")),e(window).off(i.concat(".resize"))})},e.fn.eljurtabs=function(){var t=window.isMobile&&window.isMobile(),o=e(this);if(0==o.length)return o;if(t){var i=o.children(".navigation-tabs__item.active");if(i&&i.length)try{o.scrollLeft(i.position().left-parseInt(o.css("padding-left"),10))}catch(e){}return o}if(0==o.length||t)return o;var r=o.children(".navigation-tabs__item,.navigation-tabs__items__icon");r.each(function(){var t=e(this).width()+35+2;this.setAttribute("data-width",t)});var n=o.find(".navigation-tabs__more");n.removeClass("hide");var l=n.width();return e(window).off(".tabs").on("resize.tabs",function(){r.addClass("hide");var e=o.width()-l-35,t=0;r.each(function(){t+=Number(this.getAttribute("data-width")),this.classList.toggle("hide",t>e)});var i=r.filter(".hide");n.toggleClass("hide",0==i.length),n.off("click").on("click",function(){var e=['<ul class="context__items context__items--scroll">'];i.each(function(){e.push('<a class="context__item" href="',this.getAttribute("href"),'">',this.innerText,"</a>")}),e.push("</ul>"),Context.toggle(this,{id:"contexttabsMore",html:e.join(""),dropdown:!0,alignHorizontal:"right",color:"white",leftfix:3,onShow:function(){n.addClass("active")},onClose:function(){n.removeClass("active")}})})}).trigger("resize.tabs"),r},e.fn.autocompleteOff=function(){return e(this).each(function(){var t=e(this),o=t.attr("autocomplete");if(o&&"off"!==o&&"never"!==o){var i=["street-address","address-line1","address-line2","address-line3","locality","city","administrative-area","state","province","region","postal-code","country-name","email","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-extension","phone","phone-full","phone-country-code","phone-national","phone-area-code","phone-local","phone-extension"],r=o.split(" ");if(1===r.length){if(-1!==i.indexOf(r[0]))return!0}else if(r.length>1&&(i.filter(function(e){return-1!==r.indexOf(e)}),i.length>0))return!0}var n=t.attr("readonly");if(!(n=!0===n||"true"===n)){var l=window.attrAutocompleteOffValue+window.guidGenerator().substr(0,8);t.attr("type",window.attrAutocompleteOffType).prop("type",window.attrAutocompleteOffType).attr("autocomplete",l).attr("x-autocomplete",l)}})},e.fn.hasHorizontalScrollbar=function(){var t=e(this).get(0);return t.scrollWidth>t.clientWidth},e.fn.hasVerticalScrollbar=function(){var t=e(this).get(0);return t.scrollHeight>t.clientHeight},e.fn.placeholder=function(){return e(this)},e.fn.attrn=function(t){return parseInt(e(this).attr(t),10)},e.fn.absolutePosition=function(){var t=e(this),o=t.position(),i=t.offset();return o.top=Math.max(o.top,i.top),o.left=Math.max(o.left,i.left),o},e.fn.showClassy=function(o){return o?e(this).each(function(){var o=e(this);o.removeClass("hide"),t(o)||o.show()}):e(this).removeClass("hide")},e.fn.hideClassy=function(o){return o?e(this).each(function(){var o=e(this);o.addClass("hide"),t(o)&&o.hide()}):e(this).addClass("hide")},e.fn.toggleClassy=function(t,o){return t?e(this).showClassy(o):e(this).hideClassy(o)},e.fn._val=e.fn.val,e.fn.val=function(t){return arguments.length?e(this).each(function(){var o=e(this);if(!o.is("select")||null!==t&&void 0!==t)return o._val(t);var i=o.find("option:not(:disabled)").first().attr("value");return o._val(i)}):e(this)._val()}}(jQuery),window.getCaretPosition=function(e){var t=0;if(document.selection){e.focus();var o=document.selection.createRange();o.moveStart("character",-e.value.length),t=o.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},window.setCaretPosition=function(e,t){if(e)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select()}},window.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},Math.roundToSign=function(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},Math.ceilToSign=function(e,t){return(Math.ceil(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},Math.floorToSign=function(e,t){return(Math.floor(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},function(e){e.fn.serializeObject=function(){var t=this,o={},i={},r={validate:/^[a-zA-Z_-][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,t,o){return e[t]=o,e},this.push_counter=function(e){return void 0===i[e]&&(i[e]=0),i[e]++},e.each(e(this).serializeArray(),function(){if(r.validate.test(this.name)){for(var i,n=this.name.match(r.key),l=this.value,a=this.name;void 0!==(i=n.pop());)a=a.replace(new RegExp("\\["+i+"\\]$"),""),i.match(r.push)?l=t.build([],t.push_counter(a),l):i.match(r.fixed)?l=t.build([],i,l):i.match(r.named)&&(l=t.build({},i,l));o=e.extend(!0,o,l)}}),o},e.fn.numericOnly=function(){return this.each(function(){e(this).on("keydown",function(e){-1!==[46,8,9,27,13,110,190].indexOf(e.keyCode)||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})})}}(jQuery),window.explode=function(e,t){return 2!=arguments.length||void 0===arguments[0]||void 0===arguments[1]?null:""!==e&&!1!==e&&null!==e&&("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t?[]:(!0===e&&(e="1"),t.toString().split(e.toString())))},window.str_trim=function(e){return e instanceof String||(e=e.toString()),e.trim()},window.str_replace=function(e,t,o){return o.split(e).join(t)},window.in_array=function(e,t){if(void 0==t||null==t||0==t.length)return!1;for(var o=0;o<t.length;o++)if(e==t[o])return!0;return!1},window.htmlspecialchars_decode=function(e,t){var o=0,i=0,r=!1;void 0===t&&(t=2),e=void 0==e?"":e.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var n={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===t&&(r=!0),"number"!=typeof t){for(t=[].concat(t),i=0;i<t.length;i++)0===n[t[i]]?r=!0:n[t[i]]&&(o|=n[t[i]]);t=o}return t&n.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/&#0*39;/g,"'")),r||(e=e.replace(/&quot;/g,'"')),e=e.replace(/&amp;/g,"&")},window.implode=function(e,t){return t instanceof Array?t.join(e):t},window.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.substr(1,e.length-1)},window.guidGenerator=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},window.guidIdGenerator=function(){for(var e=window.guidGenerator();e.match(/^\d/);)e=guidGenerator();return e},function(e){e.fn.datepickerField=function(t){return t=t||{},e(this).each(function(){var o=this,i=e(o);if("destroy"!==t){if(i.data("ej-datepicker"))return i.trigger("destroy"),void i.datepickerField(t);var r=i.attr("id"),n=i.val();void 0!=r&&""!==r||(r=window.guidIdGenerator(),i.attr("id",r));var l=r+"Field",a=t&&t.showYear?"d MMMM yyyy":"d MMMM",s=window.createElementString("ej-datepicker",{id:l,buttonClear:t.enableClear||i.attr("buttonclear")||i.attr("button-clear"),displayFormat:a||i.attr("dateformat")||i.attr("date-format"),minDate:t.minDate||i.attr("mindate")||i.attr("min-date"),maxDate:t.maxDate||i.attr("maxdate")||i.attr("max-date"),value:n}),c=e(s);c.on("change.datepicker",function(){if(this.value!==o.value){o.value=this.value,i.trigger("change");var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),o.dispatchEvent(e)}}),i.off("destroy").on("destroy",function(){c.remove(),c.off("change.datepicker"),i.removeClass("hide"),i.data("ej-datepicker",null),i.attr("type",i.data("original-type"))}),i.data("original-type",i.attr("type")),i.attr("type","hidden"),i.addClass("hide"),c.insertAfter(i),i.data("ej-datepicker",c)}else i.trigger("destroy")})}}(jQuery),function(e){var t={buttons:"minus-plus"};e.fn.inputNumber=function(o){return o=e.extend({},t,o||{}),e(this).each(function(){var t=this,i=e(t);if("destroy"!==o){if(i.data("ej-input-number"))return i.trigger("destroy"),void i.inputNumber(o);var r=i.prop("id");void 0!==r&&""!==r||(r=window.guidIdGenerator(),i.prop("id",r));var n=i.is("input"),l=window.createElementString("ej-input-number",{id:r+"InputNumber",buttons:o.buttons||i.attr("buttons"),disabled:i.is(":disabled"),editable:n,min:o.min||i.attr("min"),max:o.max||i.attr("max"),readonly:i.is("[readonly]"),step:o.step||i.attr("step"),size:o.size||null,value:o.value||(n?t.value:i.text())}),a=e(l),s=a.get(0),c=t.value;i.on("change",function(){t.value!==s.value&&a.val(t.value)}),a.on("change",function(){if(s.value!==t.value){i.attr("current-value",s.value).attr("prev-value",c).val(s.value).trigger("change");var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),t.dispatchEvent(e),c=String(s.value),n||i.text(s.value)}}),i.off("destroy").on("destroy",function(){i.data("ej-input-number",null),i.data("options",null),i.attr("type",i.data("original-type")),i.removeClass("hide"),$newinput.remove()}),i.data("original-type",i.attr("type")),i.attr("type","hidden"),i.attr("prev-value",t.value),i.addClass("hide"),a.insertAfter(i),i.data("ej-input-number",a),i.data("options",o)}"destroy"===o&&i.trigger("destroy")})}}(jQuery),function(e){"use strict";function t(e,t,o){var i=t.absolutePosition(),r=o&&o.width?o.width:e.outerWidth()||e.width(),n=e.height();return i.left=Math.round(i.left+t.outerWidth()/2-r/2),i.top=Math.round(i.top-n-14),"TD"===t[0].tagName&&(i.top+=13),o&&o.width&&(i.width=o.width),i}function o(e){return(e=e||{}).id=e.id||window.guidIdGenerator(),e.text=e.text||"",'<div id="'+e.id+'" class="tooltip" style="top:-9999px;left:-9999px"><div id="'+e.id+'-text" class="tooltip__text">'+e.text+"</div></div>"}e.fn.tooltip=function(i){var r=e("#tooltip");0===r.length&&(e("body").append(o({id:"tooltip",text:""})),r=e("#tooltip"),window.$tooltipElement=r);var n=e("#tooltip-text");return e(this).each(function(){var l=e(this),a=l.data("tooltip-element");if(a&&(a.remove(),l.data("tooltip-element",null)),l.off("mouseenter.tooltip mouseover.tooltip touch.tooltip").off("mouseleave.tooltip"),i&&"hide"===i){var s=l.data("tooltip-id");return s&&(e(window).off("resize."+s),e("#"+s).removeClass("tooltip--visible").prop("style","")),!0}var c,d=l.data("title");if(i&&!0===i.title2&&(c=l.data("title2")),void 0!==i&&void 0!==i.attr&&""!==i.attr?d=l.attr(i.attr):void 0!==i&&void 0!==i.text&&""!==i.text?d=i.text:d||(d=l.attr("title")),d&&(d=d.trim()),""!==d||i&&!0===i.title2)if(l.data("title",d),i&&!0===i.showOnStart){var u=i.id||l.data("tooltip-id")||window.guidIdGenerator(),h=e(o({id:u,text:d})).appendTo("body"),f=t(h,l);h.css(f),h.addClass("tooltip--visible"),i.color&&h.addClass("tooltip--"+i.color);var p=function(){if(h.hasClass("tooltip--visible")){var e=t(h,l,i);h.css(e)}else h.trigger("removeResizeListener")};h.trigger("removeResizeListener").on("removeResizeListener",function(){h.off("removeResizeListener"),window.removeEventListener("resize",p,{passive:!0})}),window.addEventListener("resize",p,{passive:!0}),h.on("tooltipHide click",function(){h.removeClass("tooltip--visible").prop("style","")}),l.data("tooltip-id",u),l.data("tooltip-element",h)}else(void 0!==d&&""!==d||void 0!==c&&""!==c)&&(l.on("mouseenter.tooltip mouseover.tooltip touch.tooltip",function(){setTimeout(function(){void 0!==c&&""!==c&&""!==d?void 0!==d?n.html(d+' <div class="hr hr2"></div>'+c):n.html(c):void 0!==c&&""!==c?n.html(c):n.html(d);var e=t(r,l,i);r.css(e).addClass("tooltip--visible")},window.isMobile&&window.isMobile()?200:10)}),l.on("mouseleave.tooltip",function(){r.removeAttr("style"),r.removeClass("tooltip--visible")}))})},e(document.documentElement).off("click.tooltip").on("click.tooltip",function(t){void 0!==window.$tooltipElement&&void 0===e(t.target).data("title")&&window.$tooltipElement.css({top:-9999,left:-9999})})}(window.jQuery),function(e){e.fn.switcher=function(t){return t=t||{},e(this).each(function(){var o=e(this),i=o.is("input"),r=i?o:o.find('input[type="checkbox"]');if("destroy"!==t){if(o.data("ej-switcher"))return o.trigger("destroy"),void o.switcher(t);var n=r.attr("id");void 0!==n&&null!==n&&""!==n||(n=window.guidIdGenerator(),r.attr("id",n));var l={id:n+"Switcher",disabled:r.is(":disabled"),checked:r.is(":checked")};["labelOff","labelOn","label"].forEach(function(e){l[e]=t[e]||o.attr(e),l[e]||i||(l[e]=r.attr(e))});var a=window.createElementString("ej-switcher",l),s=e(a);r.on("change",function(){s.get(0).checked!==r.get(0).checked&&s.prop("checked",this.checked)}),s.on("change",function(){s.get(0).checked!==r.get(0).checked&&(r.prop("checked",this.checked),r.trigger("change"))}),o.off("destroy").on("destroy",function(){o.data("ej-switcher",null),s.remove()}),o.addClass("hide"),s.insertAfter(o),o.data("ej-switcher",s)}"destroy"===t&&o.trigger("destroy")})},e.fn.checkboxSlider=e.fn.switcher}(window.jQuery),function(e){e.fn.eljurAccordion=function(t){return t=t instanceof Object?t:{},e(this).each(function(){var o=e(this);o.off("click","> .ej-accordion > .ej-accordion__header").on("click","> .ej-accordion > .ej-accordion__header",function(o){if(!o.target.closest(".ej-accordion__actions")){var i=e(this.parentNode);i.toggleClass("ej-accordion--expanded"),t.toggleAll&&i.hasClass("ej-accordion--expanded")&&i.siblings(".ej-accordion").removeClass("ej-accordion--expanded");var r=e(this.parentNode.parentNode).children(".ej-accordion"),n=r.filter(".ej-accordion--expanded").length,l=r.length===n;e(this.parentNode.parentNode).prev(".ej-accordions-before").find(".ej-accordions-before__button").text(window.trans(l?"action.collapse_all":"action.expand_all"))}});var i=o.find(".ej-accordions-before__button").first();i.length||(i=o.prev(".ej-accordions-before").find(".ej-accordions-before__button").first()),i.length&&i.off("click").on("click",function(t){t.stopPropagation();var o=e(this.parentNode).next(".ej-accordions").children(".ej-accordion"),i=o.filter(".ej-accordion--expanded").length,r=o.length===i;o.toggleClass("ej-accordion--expanded",!r),e(this).text(window.trans(r?"action.expand_all":"action.collapse_all"))})})}}(jQuery);var eljurSelectHandlerPostfix="EjSelect",Grid;function EljurFixedHeader(e,t){if($("#loading").filter(":not(.hide)").length>0)return setTimeout(function(){EljurFixedHeader(e,t)},40),!0;if(void 0===e||0===e.length){var o=$("#fixedHeader"),i=$("#fixedHeaderContainer"),r=$("#table_header_shadow"),n=$("#marker");EljurFixedHeaderGroup(curgrp,o,i,r,n,!1,t)}else Object.values(e).forEach(function(e){var o=$("#g"+e+"_fixedHeader"),i=$("#g"+e+"_fixedHeaderContainer"),r=$("#g"+e+"_table_header_shadow"),n=$("#g"+e+"_marker");EljurFixedHeaderGroup(e,o,i,r,n,!1,t)})}function _scrollAddFixation(e){return _scrollClearCSS(e),e.addClass("table_header_fixed"),e.removeClass("table_header_absolute"),1}function _scrollRemoveFixation(e){return _scrollClearCSS(e),e.removeClass("table_header_fixed"),e.removeClass("table_header_absolute"),0}function _scrollAddFixationAbsolute(e,t){return _scrollRemoveFixation(t),t.addClass("table_header_absolute").css("top",e),void 0===window.Grid&&$("#day_container").css("top",e),2}function _scrollClearCSS(e){return e.css("top","").css("position",""),0}!function(e){e.fn.decorateSelect=function(t){if(!this||!this.length)return e(this);var o=window.isOldBrowser&&window.isOldBrowser();return void 0==t&&(t={}),e(this).each(function(){var i=e(this),r=this;if(i.attr("ej-select"))return i.removeAttr("ej-select"),i.trigger("destroy"),void i.decorateSelect(t);i.removeClass("select");var n=i.prop("id");if(""!==n&&void 0!==n&&null!==n||(n=window.guidIdGenerator("id",14),i.prop("id",n)),o){i.addClass("select");var l=t.size||i.attr("size");return l&&i.addClass("select--"+l),i.off("change.decorate"),t.redirect&&i.on("change.decorate",function(){if(!i.is("[multiple]")){var e=this.value;e&&e!==window.location.href&&(window.location.href=e)}}),void i.off("hideSelect").on("hideSelect",function(){i.hideClassy()}).off("showSelect").on("showSelect",function(){i.showClassy()})}i.attr("width")&&(t.width=i.attr("width")),t.style=t.width?"width:"+t.width:null;var a=t.threshold?t.threshold:20,s=i.attr("class"),c=s?s.trim().replace(/\s+/gi," ").split(" "):[];if(c&&c.length){["is-eljur-select","is-eljur-select-hover","is-eljur-select-hover-href","select"].forEach(function(e){var t=c.indexOf(e);t>-1&&c.splice(t,1)})}var d,u=t.multiple||r.hasAttribute("multiple"),h=window.createElementString("ej-select",{disabled:r.disabled,class:c.join(" "),id:n+eljurSelectHandlerPostfix,fill:!!(t.width||r.hasAttribute("fill")||r.hasAttribute("width"))||null,multiple:u,options:n,placeholder:t.placeholder||r.getAttribute("placeholder"),redirect:t.redirect||r.hasAttribute("redirect"),search:!!(t.search||r.childElementCount>a||r.hasAttribute("search"))||null,searchThreshold:t.searchThreshold||r.getAttribute("search-threshold"),size:t.size||r.getAttribute("size"),style:t.style,value:i.val(),width:t.width||r.getAttribute("width")},""),f=e(h),p=f.get(0);function m(){var e=r.childElementCount>a,t=i.val();f.prop("disabled",i.is(":disabled")),f.attr("search",e),f.innerHTML=r.innerHTML,f.toggleClass("fl",i.hasClass("fl")),f.toggleClass("fr",i.hasClass("fr")),setTimeout(function(){f.val(t)},300)}i.addClass("hide"),f.insertAfter(i),i.attr("ej-select",!0),u&&setTimeout(function(){var e=i.val();f.val(e)},300),i.off("hideSelect").on("hideSelect",function(){f.hideClassy()}).off("showSelect").on("showSelect",function(){f.showClassy()}),i.off("destroy").on("destroy",function(){d&&d.disconnect&&d.disconnect(),i.removeAttr("ej-select"),i.removeClass("hide");try{p.vueComponent.$destroy()}catch(e){}f.remove()}),setTimeout(function(){i.on("change",function(){(u?f.val().sort().join("~")!==i.val().sort().join("~"):i.val()!==f.val())&&f.val(i.val())}),i.on("refresh",function(){(u?f.val().sort().join("~")!==i.val().sort().join("~"):i.val()!==f.val())&&f.val(i.val())}),f.on("change",function(){if(u?f.val().sort().join("~")!==i.val().sort().join("~"):i.val()!==f.val()){i.val(f.val()),i.trigger("change");var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),r.dispatchEvent(e)}}),d&&d.disconnect&&d.disconnect(),(d=new MutationObserver(m)).observe(r,{attributes:!0,attributeFilter:["disabled","search","placeholder"]})},800)})}}(jQuery),window.Grid=void 0,window.EljurGrid=function(e,t){if(0!==e.length){var o={};o.defaults={cellSize:32,fixedHeader:!0,hoverCross:!0,minScreenResize:window.isMobile&&window.isMobile()?0:900,maxScreenResize:2e3,catchResize:!0,isJournal:!1,allowedTags:["div"]},o.catchResize=!0,o.groups=[],o.group=void 0,o.groupsControllers=[],o.firstRun=!0,o.guid=window.guidIdGenerator(),o.previousWidth=window.innerWidth,o.init=function(t){window.hasEljurGrid=!0,void 0!==t&&t instanceof Object||(t={}),o.options=$.extend(!0,o.defaults,t),e.hasClass("grid--calendar-mini")?o.options.cellSize=72:e.hasClass("grid--calendar")?o.options.cellSize=100:e.hasClass("grid--double")||e.hasClass("grid--double_width")?o.options.cellSize=64:(e.hasClass("grid--one_and_half")||e.hasClass("grid--one_and_half_width"))&&(o.options.cellSize=48),t.cellSize=o.options.cellSize,o.$loading=e.find('[data-grid-control="loading"]'),o.$groups=e.find(".grid-group[data-grid-group]"),o.$scrollbar=e.find('[data-grid-control="scrollbar"]'),o.$loading.showClassy(),o.$groups.addClass("hide"),o.$after=$('<div class="grid__after"></div>').insertAfter(e);var i=o.options.group?String(o.options.group):void 0;o.options.group=void 0,o.$groups.each(function(e){var r=this.getAttribute("data-grid-group");r=String(r),-1===o.groups.indexOf(r)&&(o.groups.push(r),(void 0===o.options.group&&0===e||i&&i===r)&&(t.group=r))}),o.$loading.hideClassy(),o.$groups.removeClass("hide"),o.groups.length>0&&o.firstRun&&(o.changeGroup(t.group),o.groupsControllers[t.group].scroll("end")),o.firstRun=!1,o.setupResizeEvent()};var i,r=!1;return o.scrollEventListener=function(){i&&clearTimeout(i),i=setTimeout(function(){o.catchResize&&window.innerWidth!==o.previousWidth&&!o.firstRun&&setTimeout(function(){o.groupsControllers[o.group].refresh(!1)},200),o.previousWidth=window.innerWidth,o.previousHeight=window.innerHeight},50)},o.setupResizeEvent=function(){r||(window.removeEventListener("scroll",o.scrollEventListener,{passive:!0}),window.addEventListener("scroll",o.scrollEventListener,{passive:!0}),r=!0)},o.changeGroup=function(i){var r=o.group;i=String(i);var n=window.scrollY,l=o.firstRun?310:e.height();if(e.css({minHeight:l+"px"}),"function"==typeof window.hookGridBeforeChangeGroup)try{window.hookGridBeforeChangeGroup(i,r)}catch(e){console.warn(e)}if(Context.hide(),i&&o.groups.length>0&&o.group!==i&&-1!==o.groups.indexOf(i)){var a=o.$groups.filter('[data-grid-group="'+i+'"]');if(o.group&&o.groupsControllers[o.group]&&o.groupsControllers[o.group].freeze(),o.group=i,o.$groups.filter(':not([data-grid-group="'+i+'"])').addClass("hide"),a.removeClass("hide"),"function"==typeof window.hookGridChangeGroup)try{window.hookGridChangeGroup(i,r)}catch(e){console.warn(e)}o.options.gridId=e.attr("id"),void 0===o.groupsControllers[i]?(o.options.group=i,o.groupsControllers[i]=new EljurGridGroup(a,t,o.$after)):(o.groupsControllers[i].fixedHeaderReset(),o.groupsControllers[i].melt());var s=parseInt(i),c=0!==window.curgrp&&window.curgrp!==s;window.curgrp=s,"function"==typeof window.journalChangeGrp&&t.isJournal&&journalChangeGrp(window.curgrp,!0,c)}if("function"==typeof window.hookGridAfterChangeGroup)try{window.hookGridAfterChangeGroup(i,r)}catch(e){console.warn(e)}setTimeout(function(){!o.firstRun&&n&&(window.scroll(0,n),o.groupsControllers&&o.groupsControllers[i]&&o.groupsControllers[i].onScroll(n)),e.css({minHeight:0})},300)},o.init(t),setTimeout(function(){e.trigger("gridReady")},100),{get:function(e){return void 0!==e&&null!==e&&(void 0!==o[e]&&"function"!==(o[e],!1)?o[e]:o.group&&void 0!==o.groupsControllers[o.group]?o.groupsControllers[o.group].get(e):void 0)},setOption:function(e,t){return void 0!==e&&null!==e&&(o.options[e]=t,Object.values(o.groups).forEach(function(i){o.groupsControllers[i]&&o.groupsControllers[i].setOption(e,t)}),o.options)},scroll:function(e){o.groupsControllers[o.group].scroll(e)},scrollTo:function(e){o.groupsControllers[o.group].scrollTo(e)},getElement:function(){return e},getScrollPosition:function(){return o.groupsControllers[o.group].getScrollPosition()},getScrollLength:function(){return o.groupsControllers[o.group].getScrollLength()},getScrollStep:function(){return o.groupsControllers[o.group].getScrollStep()},refresh:function(e){o.groupsControllers[o.group].refresh(e)},refreshHover:function(){o.groupsControllers[o.group].refreshHover()},changeGroup:function(e){o.changeGroup(e)},freeze:function(){o.groupsControllers[o.group].freeze()},melt:function(){o.groupsControllers[o.group].melt()}}}},window.EljurGridGroup=function(e,t,o){if(0===e.length)return!1;var i={},r=$(document);return i.defaults={cellSize:32,fixedHeader:!1,hoverCross:!0},i.init=function(t){if(i.$element=e,i.$header=i.$element.find('[data-grid-control="header"]'),i.$headerInside=i.$header.children(".inside"),i.$body=i.$element.find('[data-grid-control="body"]'),i.$columnsContainerHeader=i.$header.find('[data-grid-control="columns-header"]'),i.$columnsContainerBody=i.$body.find('[data-grid-control="columns-body"]'),i.$scrollHeader=i.$header.find('[data-grid-control="scroll-header"]'),i.$scrollHeaderInside=i.$scrollHeader.find('[data-grid-control="scroll-header-inside"]'),i.$scrollBody=i.$body.find('[data-grid-control="scroll-body"]'),i.$scrollBodyInside=i.$scrollBody.find('[data-grid-control="scroll-body-inside"]'),i.$buttonScrollLeft=i.$header.find('[data-grid-control="button-scroll-left"]'),i.$buttonScrollLeftBlock=i.$buttonScrollLeft.parent().parent(),i.$buttonScrollRight=i.$header.find('[data-grid-control="button-scroll-right"]'),i.$buttonScrollRightBlock=i.$buttonScrollRight.parent().parent(),i.$shadow=i.$header.find('[data-grid-control="shadow"]'),i.$scrollbarContainer=i.$element.find('[data-grid-control="scrollbar"]'),i.$scrollbarSlider=i.$scrollbarContainer.find("ej-slider"),i.$selectType=i.$element.find('select[data-grid-control="mtype"]'),i.$marker=$('<div class="grid__marker"></div>').insertAfter(i.$body),0===i.$marker.length&&(i.$marker=i.$element.find("div.grid__marker")),i.catchResize=!0,i.mtype=!1,i.mtypeOld=!1,i.options=$.extend(!0,i.defaults,t||{}),i.$body.off(".grid"),!0===i.options.fixedHeader){var o=!1;function r(){o||(o=!0,i.fixedHeaderReset(),i.fixedHeaderController&&i.fixedHeaderController.refresh(),setTimeout(function(){o=!1},120))}i.$body.off("focusout.grid").on("focusout.grid",r).off("mouseup.grid").on("mouseup.grid",r).off("click.grid").on("click.grid",r)}if(!0===i.options.hoverCross&&(i._prepareNames(),!0===i.options.hoverCross&&i.$body.on("mouseover.grid",".cell[name]",function(){var e=this.getAttribute("name");e!==i.hoverCrossName&&(i.hoverCrossName&&i.$lines&&i.$lines[i.hoverCrossName]&&i.$lines[i.hoverCrossName].length>0&&i.$lines[i.hoverCrossName].removeClass("cell--hover"),i.hoverCrossName=e,i.hoverCrossName&&i.$lines&&i.$lines[i.hoverCrossName]&&i.$lines[i.hoverCrossName].length>0&&i.$lines[i.hoverCrossName].addClass("cell--hover"))}).on("mouseleave.grid",function(){i.hoverCrossName&&i.$lines&&i.$lines[i.hoverCrossName]&&i.$lines[i.hoverCrossName].length>0&&i.$lines[i.hoverCrossName].removeClass("cell--hover")})),i.buttonsTimeout=200,i.$buttonScrollLeft&&i.$buttonScrollLeft.off("click mousedown mouseup").on("mousedown",function(e){e.preventDefault(),i.scrollTimeout2=setTimeout(function(){i.scrollDown(-1)},i.buttonsTimeout)}).on("mouseup",function(e){e.preventDefault(),i.scrollUp(-1)}).on("click",function(e){e.preventDefault()}),i.$buttonScrollRight&&i.$buttonScrollRight.off("click mousedown mouseup").on("mousedown",function(e){e.preventDefault(),i.scrollTimeout2=setTimeout(function(){i.scrollDown(1)},i.buttonsTimeout)}).on("mouseup",function(e){e.preventDefault(),i.scrollUp(1)}).on("click",function(e){e.preventDefault()}),i.$selectType.length>0&&i.$selectType.off("change.grid").on("change.grid",function(){var e=this.value;e!=i.mtypeOld&&(i.filter(e),i.refresh())}),window.isMobile&&window.isMobile()){var n=!1,l=-1;function a(){if(n){n=!1;var e=i.$scrollBody.scrollLeft(),t=Math.round(e/32);i.scrollPosition=t,i.scroll(0,!0)}}i.$scrollBody[0].addEventListener("scroll",function(e){n&&(i.$scrollHeader.scrollLeft(i.$scrollBody.scrollLeft()),-1!==l&&clearTimeout(l),l=window.setTimeout(a,80))},{passive:!0}),i.$scrollBody[0].addEventListener("touchstart",function(e){n=!0},{passive:!0}),i.$scrollBody.css("overflow-x","auto")}i._selectorVisibleColumn(),i.refresh()},i._prepareNames=function(){i.$lines={};try{i.__prepareNamesForCells(i.$columnsContainerBody.children()),i.__prepareNamesForCells(i.$scrollBody.children().children())}catch(e){i.options.hoverCross=!1}},i.__prepareNamesForCells=function(e,t){if(!0!==t&&e.length<30)i.__prepareNamesForCell(e.children());else for(var o=Math.ceil(e.length/50),r=0;r<o;r++){var n=50*r,l=e.slice(n,n+50).children();i.__prepareNamesForCell(l)}},i.__prepareNamesForCell=function(e){e.each(function(){var e=this.getAttribute("name");e&&(void 0===i.$lines[e]?i.$lines[e]=$(this):i.$lines[e]=i.$lines[e].add(this))})},i.scrollTimeout1=void 0,i.scrollTimeout2=void 0,i.scrollCheck=!1,i.scrollDown=function(e){i.scrollCheck=!0,i.scroll(e)&&(i.scrollTimeout1=setTimeout(function(){i.scrollDown(e)},50))},i.scrollUp=function(e){i.scrollCheck?i.scrollCheck=!1:i.scroll(e),clearTimeout(i.scrollTimeout1),clearTimeout(i.scrollTimeout2)},i.scroll=function(e,t,o){var r=i.scrollPosition+e;if(!0!==t&&(t=!1),!0!==o&&(o=!1),"begin"===e||e<-i.scrollPosition?(t=!0,e=0-i.scrollPosition):"end"===e||e>i.columnsNum-i.columnsNumOnScreen-i.scrollPosition?(t=!0,e=i.columnsNum-i.columnsNumOnScreen-i.scrollPosition):isNaN(parseInt(e))&&(e=0),t||i.scrollPosition+e!==i.scrollPosition){i.scrollPosition+e+i.columnsNumOnScreen>i.columnsNum&&(i.scrollPosition=i.columnsNum-i.columnsNumOnScreen),i.scrollPosition+e<0&&(i.scrollPosition=0),i.scrollPosition+=e;var n=i.scrollPosition*i.options.cellSize;i.$scrollHeader.scrollLeft(n),i.$scrollBody.scrollLeft(n),!1===o&&i.$scrollbarSlider&&i.$scrollbarSlider.attr("value",i.scrollPosition),i.scrollCheck=!1}return"function"==typeof i.options.onScroll&&i.options.onScroll(),i.$scrollbarSlider.attr("value",i.scrollPosition),i.scrollPosition===r},i._selectorVisibleColumn=function(e){i.options.filter?(i.selectorVisibleColumn=i.options.filter,i.selectorInvisibleColumn=":not("+i.options.filter+")"):e&&"null"!==e&&"undefined"!==e?(i.selectorVisibleColumn='div.cells[mt_id="'+e+'"]',i.selectorInvisibleColumn=":not("+i.selectorVisibleColumn+")"):(i.selectorVisibleColumn=":not(.cell):not(.cells_hidden)",i.selectorInvisibleColumn=".hide,.cells_invisible,.cells_hidden")},i.filter=function(e){var t=i.$scrollHeaderInside.children(":not(script)"),o=i.$scrollBodyInside.children(":not(script)");i._selectorVisibleColumn(e);var r=t.filter(i.selectorVisibleColumn);r.length>0?(i.mtypeOld=i.mtype=e,r.find(".megadate").addClass("megadate--fixw"),r.showClassy(),t.filter(i.selectorInvisibleColumn).hideClassy(),o.filter(i.selectorVisibleColumn).showClassy(),o.filter(i.selectorInvisibleColumn).hideClassy(),r.find(".megadate").toggleClass("megadate--fixw","null"!==i.mtype&&null!==i.mtype),i.refresh()):(i._selectorVisibleColumn(i.mtypeOld),i.mtype=i.mtypeOld,i.$selectType.val(i.mtype).trigger("refresh"),"undefined"!=typeof errormsg_type&&alert(errormsg_type,!0))},i.refresh=function(){i.$element.css("width","auto"),i.selectorVisible=":not(.hide,.cells_invisible,.cells_hidden)",i.selectorInvisible=".hide,.cells_invisible,.cells_hidden";var e=window.isMobile&&window.isMobile(),n=i.$columnsContainerHeader.children(":not(script)"),l=i.$columnsContainerBody.children(":not(script)"),a=n.filter(i.selectorVisible),s=l.filter(i.selectorVisible),c=n.filter(i.selectorInvisible),d=l.filter(i.selectorInvisible),u=0,h=0;a.each(function(t){var o=$(this);if(o.showClassy(),d.eq(t).showClassy(),o.is('[data-grid-control="scroll-header"]')||e&&o.is(".cells_scroll_control"))return!0;var r=o.attr(e?"data-grid-width-mobile":"data-grid-width");(r=parseInt(r))&&!isNaN(r)?(o.width(r),s.eq(t).width(r)):r=o.is(".cells_num,.cells_custom_width")?Math.ceil(o.width()):o.is(".cells_one_and_half_width")?Math.ceil(1.5*i.options.cellSize):o.is(".cells_double_width")?2*i.options.cellSize:i.options.cellSize,o.is('[data-grid-option="exclude"]')&&(h+=r),u+=r}),requestAnimationFrame(function(){i.$header.hideClassy(),i.$body.hideClassy(),c.each(function(e){$(this).hideClassy(),d.eq(e).hideClassy()});var n=Math.floor(o.width()-3);e&&(n+=32),i.columnsNum=i.$scrollHeaderInside.children(i.selectorVisibleColumn).filter(":not(script)").length,i.columnsNumOnScreen=Math.floor((n-u)/i.options.cellSize);var l=i.columnsNum*i.options.cellSize,a=Math.min(i.columnsNumOnScreen,i.columnsNum)*i.options.cellSize,s=a+u-h;i.columnsNumOnScreen===i.columnsNum-1&&(i.columnsNumOnScreen,i.options.cellSize),i.$scrollHeader.width(a),i.$scrollHeaderInside.width(l),i.$scrollBody.width(a),i.$scrollBodyInside.width(l),i.$shadow.width(s),void 0===i.scrollPosition||i.scrollPosition>i.columnsNum-i.columnsNumOnScreen?i.scrollPosition=i.columnsNum-i.columnsNumOnScreen:i.scrollPosition=0;var f=i.columnsNum>i.columnsNumOnScreen,p=!e&&f;i.$buttonScrollLeft.toggleClassy(p),i.$buttonScrollRightBlock.toggleClassy(p),requestAnimationFrame(function(){if(i.$header.showClassy(),i.$body.showClassy(),f){var e=i.$scrollBody.position().left-i.$element.position().left;i.$scrollbarContainer.showClassy().width(s),i.$scrollbarSlider.width(a).css("marginLeft",e).attr("max",i.columnsNum-i.columnsNumOnScreen).attr("value",i.scrollPosition).off("change").on("change",function(){i.scrollPosition=this.value,i.scroll(0,!0,!0)}),i.scroll("end",!0)}else i.$scrollbarSlider.off("change"),i.$scrollbarContainer.hideClassy(),i.scrollbarInstance=!1;i.$element.width(n),!0===i.options.fixedHeader&&i.$scrollBody.height()>4*window.cell_size&&(i.fixedHeaderReset(),void 0===i.fixedHeaderController?i.fixedHeaderController=EljurFixedHeaderGroup(t.group,i.$headerInside,i.$header,i.$shadow,i.$marker,r,i.$scrollbarContainer,i.$body,!0):i.fixedHeaderController.melt())}),setTimeout(function(){$(document.documentElement).trigger("eljurGridFinishPaint")},300)})},i.fixedHeaderReset=function(){i.posMode=-1,i.posModeScrollbar=-1,i.scrollCurrent=-1,i.$header.attr("style",""),i.$headerInside.attr("style","").removeClass("table_header_absolute").removeClass("table_header_fixed"),requestAnimationFrame(function(){var e=i.$headerInside.width(),t=Math.max(i.$header.height(),i.$headerInside.height());i.$headerInside.width(e).height(t),i.$header.width(e).height(t)})},i.freeze=function(){i.catchResize=!1,i.fixedHeaderController&&i.fixedHeaderController.freeze()},i.melt=function(){i.catchResize=!1,i.fixedHeaderController&&i.fixedHeaderController.melt()},i.init(t),{get:function(e){return void 0!==i[e]&&"function"!=typeof i[e]?i[e]:void 0},setOption:function(e,t){return void 0!==e&&null!==e&&(i.options[e]=t,i.options)},scroll:function(e){i.scroll(e)},scrollTo:function(e){i.scroll(e-i.scrollPosition)},getScrollPosition:function(e){return i.scrollPosition},getScrollLength:function(e){return i.columnsNum},getScrollStep:function(e){return i.columnsNumOnScreen},refresh:function(e){i.refresh(),!0===e&&!0===i.options.hoverCross&&i._prepareNames()},refreshHover:function(){!0===i.options.hoverCross&&i._prepareNames()},fixedHeaderReset:function(){i.fixedHeaderReset()},freeze:function(){i.freeze()},melt:function(){i.melt()},onScroll:function(e){i.fixedHeaderController&&i.fixedHeaderController.onScroll(e)}}},window.EljurFixedHeaderGroup=function(e,t,o,i,r,n,l,a,s,c){if(void 0!==t&&void 0!==o&&0!==t.length&&0!==o.length){e=parseInt(e);$(window);var d=window,u={isGrid:!!s,catchScroll:!0};void 0!==a&&!1!==a&&1===a.length||(a=$("#g"+e+"_journal")),u.refresh=function(){u.isGrid||o.attr("style",""),_scrollRemoveFixation(t),u.heightContainer=u.isGrid?parseInt(o.css("height").replace("px","")):o.height(),u.startPosition=o.offset().top,u.endPosition=u.startPosition+a.height()-1.5*cell_size,u.posMode=0,u.scrollbarEnabled=l&&!l.hasClass("hide"),u.startPositionScrollbar=!!u.scrollbarEnabled&&u.startPosition+u.heightContainer+l.height()+cell_size,u.endPositionScrollbar=!!u.scrollbarEnabled&&r.offset().top+l.height(),u.posModeScrollbar=0,u.isGrid||(u.heightContainer+=2,e===curgrp&&(window.startPosition=u.startPosition,window.endPosition=u.endPosition),o.height(u.heightContainer))};var h=null,f=0,p=0;return u.scrollEventListener=function(e){f++;var t=d.scrollY,o=Math.abs(t-p)>64,i=f>(o?1:33)?1:66;h&&clearTimeout(h),h=setTimeout(function(){p=t,u.onScroll(t),f=0},i)},u.init=function(){u.isGrid||(window.first_run&&fixedHeaderSet(e,o,r,a),i&&i.width(t.children(".table_header").children().filter(":not(script)").width())),window.removeEventListener("scroll",u.scrollEventListener,{passive:!0}),window.addEventListener("scroll",u.scrollEventListener,{passive:!0}),u.onScroll(window.scrollY)},u.onScroll=function(e){if(!1===u.catchScroll||"no"===document.body.getAttribute("scroll")||"number"!=typeof e||e===u.scrollCurrent)return!1;var r,n;if(u.scrollCurrent=e,e>u.startPosition)e>u.endPosition+2?o.length>0&&(r=2):r=1;else{if(0===u.posMode&&(!u.scrollbarEnabled||0===u.posModeScrollbar))return;r=0}if(!u.isGrid&&($("#day_container").remove(),$("#content").find(".type_sel_hover").removeClass("type_sel_hover"),1===r||2===r)){var a=!0;e<u.startPosition+22&&(a=!1),i.toggleClass("table_shadow_visible",a)}if(r!==u.posMode){switch(r){case 0:_scrollRemoveFixation(t);break;case 1:_scrollAddFixation(t);break;case 2:_scrollAddFixationAbsolute(u.endPosition-o.position().top,t)}Context.is("in-grid")&&Context.alignGrid(1===r?"fixed":"absolute")}u.scrollbarEnabled&&(n=e+window.innerHeight>=u.startPositionScrollbar&&e+window.innerHeight<u.endPositionScrollbar?1:0,u.posModeScrollbar===n&&u.posMode===r||l.toggleClass("grid__scrollbar--fixed",1===n),u.posModeScrollbar=n);u.isGrid&&void 0!==window.Grid?(Grid.posMode=r,Grid.fixedHeaderHeight=0===u.posMode?0:u.heightContainer):window.posMode=r,u.posMode=r,Context.set("fixedHeaderHeight",1===r?u.heightContainer:0)},u.refresh(),u.init(),{freeze:function(){u.catchScroll=!1},melt:function(){u.catchScroll=!0},onScroll:function(e){u.onScroll(e)},refresh:function(){var e=window.scrollY;u.refresh(),requestAnimationFrame(function(){u.onScroll(e)})}}}},window.EljurCounterRequest=function(e,t){return fetch("https://img.eljur.ru/img-app/a."+e+"/id."+t)},window.EljurCounter=function(e){return e instanceof Object&&void 0!=e.id&&{show:function(){return EljurCounterRequest("show",e.id)},click:function(){return EljurCounterRequest("click",e.id)}}},window.EljurNotice=function(e,t){var o=$('[id="notice-'+e+'"]'),i=($('[id="notice-content-'+e+'"]'),$('[id="notice-collapse-'+e+'"]'));return $('[id="notice-close-'+e+'"]').on("click",function(t){t.preventDefault(),o.slideUp(),JournalCommon.setPref(e,"no")}),$('[id="notice-title-'+e+'"]').length>0?i.on("click",function(t){t.preventDefault();var i,r,n=$(this);o.toggleClass("notice--collapse"),!o.hasClass("notice--collapse")?(i="no",r="свернуть"):(i="yes",r="развернуть"),JournalCommon.setPref(e+"collapse",i),n.attr("title",r)}):i.remove(),o},function(){function addEvent(e,t,o){if(e.addEventListener)e.addEventListener(t,o,!1);else{if(!e.attachEvent)throw new Error("not supported or DOM not loaded");e.attachEvent("on"+t,function(){o.call(e)})}}if(document.documentElement.getBoundingClientRect)var getOffset=function(e){var t=e.getBoundingClientRect(),o=e.ownerDocument,i=o.body,r=o.documentElement,n=r.clientTop||i.clientTop||0,l=r.clientLeft||i.clientLeft||0,a=1;if(i.getBoundingClientRect){var s=i.getBoundingClientRect();a=(s.right-s.left)/i.clientWidth}return a>1&&(n=0,l=0),{top:t.top/a+(window.pageYOffset||r&&r.scrollTop/a||i.scrollTop/a)-n,left:t.left/a+(window.pageXOffset||r&&r.scrollLeft/a||i.scrollLeft/a)-l}};else var getOffset=function(e){var t=0,o=0;do{t+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:o,top:t}};function getBox(e){var t,o,i=getOffset(e);return t=i.left,o=i.top,{left:t,right:t+e.offsetWidth,top:o,bottom:o+e.offsetHeight}}function addStyles(e,t){for(var o in t)t.hasOwnProperty(o)&&(e.style[o]=t[o])}function copyLayout(e,t){var o=getBox(e);addStyles(t,{position:"absolute",left:o.left+"px",top:o.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})}var toElement=(div=document.createElement("div"),function(e){div.innerHTML=e;var t=div.firstChild;return div.removeChild(t)}),div,getUID=(id=0,function(){return"ValumsAjaxUpload"+id++}),id;function fileFromPath(e){return e.replace(/.*(\/|\\)/,"")}function getExt(e){return-1!==e.indexOf(".")?e.replace(/.*[.]/,""):""}function hasClass(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){var o=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(o,"")}function removeNode(e){e.parentNode.removeChild(e)}window.AjaxUpload=function(e,t){for(var o in this._settings={action:"upload.php",name:"userfile",multipleUploadersFix:!1,data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",disabledClass:"disabled",onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}},t)t.hasOwnProperty(o)&&(this._settings[o]=t[o]);e.jquery?e=e[0]:"string"==typeof e&&(/^#.*/.test(e)&&(e=e.slice(1)),e=document.getElementById(e)),e&&1===e.nodeType&&("A"==e.nodeName.toUpperCase()&&addEvent(e,"click",function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)}),this._button=e,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks())},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){addClass(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();"INPUT"!=e&&"BUTTON"!=e||this._button.setAttribute("disabled","disabled"),this._input&&(this._input.parentNode.style.visibility="hidden")},enable:function(){removeClass(this._button,this._settings.disabledClass),$(this._button).prop("disabled",!1),this._disabled=!1},_createInput:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("name",this._settings.name),t.setAttribute("class","illegitimateAjaxUploadInput"),addStyles(t,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",cursor:"pointer"});var o=document.createElement("div");addStyles(o,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,cursor:"pointer",direction:"ltr",zIndex:2050}),addEvent(t,"change",function(){if(t&&""!==t.value){var o=fileFromPath(t.value);!1!==e._settings.onChange.call(e,o,getExt(o))?e._settings.autoSubmit&&e.submit():e._clearInput()}}),addEvent(t,"mouseover",function(){addClass(e._button,e._settings.hoverClass),!0===e._settings.multipleUploadersFix&&($(t).parent().attr("id","h"+$(e._button).attr("id")).attr("hometaskArea",!0),$(".illegitimateAjaxUploadInput").on("mouseover",function(){}).on("mouseout",function(){$(t).parent().hide()}))}),addEvent(t,"mouseout",function(){removeClass(e._button,e._settings.hoverClass)}),o.appendChild(t),document.body.appendChild(o),this._input=t},_clearInput:function(){this._input&&(removeNode(this._input.parentNode),this._input=null,this._createInput(),removeClass(this._button,this._settings.hoverClass))},_rerouteClicks:function(){var e=this;addEvent(e._button,"mouseover",function(){if(!e._disabled){e._input||e._createInput();var t=e._input.parentNode;copyLayout(e._button,t),t.style.visibility="visible"}})},_createIframe:function(){var e=getUID(),t=toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(){var e=this._settings,t=toElement('<form method="post" enctype="multipart/form-data"></form>'),o=getUID();for(var i in t.setAttribute("action",e.action),t.setAttribute("target",o),t.style.display="none",document.body.appendChild(t),e.data)if(e.data.hasOwnProperty(i)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",i),r.setAttribute("value",e.data[i]),t.appendChild(r)}return t},_getResponse:function(iframe,file){var toDeleteFlag=!1,self=this,settings=this._settings;addEvent(iframe,"load",function(){if("javascript:'%3Chtml%3E%3C/html%3E';"!=iframe.src&&"javascript:'<html></html>';"!=iframe.src){var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document,response;if(!doc.readyState||"complete"==doc.readyState)if(!doc.body||"false"!=doc.body.innerHTML)doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,settings.responseType&&"json"==settings.responseType.toLowerCase()&&(doc.body.firstChild&&"PRE"==doc.body.firstChild.nodeName.toUpperCase()&&(doc.normalize(),response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,settings.onComplete.call(self,file,response),toDeleteFlag=!0,iframe.src="javascript:'<html></html>';"}else toDeleteFlag&&setTimeout(function(){removeNode(iframe)},0)})},submit:function(){var e=this,t=this._settings;if(this._input&&""!==this._input.value){var o=fileFromPath(this._input.value);if(!1!==t.onSubmit.call(this,o,getExt(o))){var i=this._createForm();removeNode(this._input.parentNode),removeClass(e._button,e._settings.hoverClass);var r=new FormData;r.append("userfile",this._input.files[0]),fetch(i.getAttribute("action"),{method:"POST",body:r,mode:"cors",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(r){t.onComplete.call(e,o,r),e._createInput(),removeNode(i),i=null,removeNode(e._input),e._input=null},function(e){console.log(e)}).catch(function(e){throw new Error(e)})}else this._clearInput()}}}}();var jrpc=new rpc(!0),JournalCommon={url:"/journal-index-rpc-action",action:jrpc.action,gotourl:"",saveUserAddress:function(e){e=e||!1;var t=this.gotourl;e&&jrpc.callPool(this.action("saveUserAddress",[e]),function(e){e.result?top.location.href=t:alert(e.error,!0)})},initSMSPay:function(e,t,o,i,r){t=t||!1,jrpc.callPool(this.action("initSMSPay",[e,t]),function(e){e&&0!=e.result&&void 0!=e.result?e.result&&($("#result,#press").show(),$("#sms_code").html(e.sms_code),o instanceof Function&&o(e)):($("#error").show(),i instanceof Function&&i()),$("#loading").hide(),$("#pay_refresh").show(),r instanceof Function&&r()})},setPref:function(e,t,o,i,r){jrpc.callPool(this.action("setPref",[e,t]),function(e){e&&0!=e.result&&void 0!=e.result?e.result&&o instanceof Function&&o(e):i instanceof Function&&i(),r instanceof Function&&r()})},getPref:function(e,t,o,i){jrpc.callPool(this.action("getPref",[e]),function(e){e&&0!=e.result&&void 0!=e.result?e.result&&t instanceof Function&&t(e):o instanceof Function&&o(),i instanceof Function&&i()})}};function journalInsertChar(e,t){var o,i;t?(o="i",i=3):(o="",i=2),o+=e.parentNode.id.substr(i);var r=$("#ubel"+o);r.off("focusout");var n=getCaretPosition(r.get(0)),l=r.val();l===r.attr("placeholder")&&(l="",n=0);var a=e.getAttribute("realchar"),s=a||$(e).text(),c=$(e).parent().parent().find('input[name="htminutes"], input[name^="htiminutes"]');if("button-wh"===e.getAttribute("button-type"))r.val(s).removeClass("placeholder"),c.val(0);else{var d=(l.substr(0,n)+s+l.substr(n)).replace($('button[button-type="button-wh"]').first().text(),"");r.val(d).removeClass("placeholder"),setCaretPosition(r.get(0),n+s.length)}return!1}function journalUserButtons(e,t){t&&(e="i"+e),$("#ub"+e).css({position:"absolute",top:-35}).hide(),$(".user_buttons").not(".user_buttons_individual").hide(),t||$("#ubel"+e).on("focus",function(){var t=$("#ub"+e).show();$(document).on("focusin.ub"+e+" click.ub"+e,function(o){$(o.target).closest("#ub"+e+", #ubel"+e).length||($(document).off(".ub"+e),t.fadeOut("medium"))})})}function journalTrSelect(e,t,o){o=o||!0,t=t||!1;for(var i=$(".trselect"),r=0;r<i.length;r++)$(i[r]).removeClass("trselect");if(!t){if("string"==typeof e)i=$('div[name="'+e+'"]');else i=$(e).find("div");for(r=0;r<i.length;r++)o&&$(i[r]).removeClass("trhover"),$(i[r].parentNode).addClass("trselect")}return!1}var prev_hover_name="",namecache={},namecache_i={},hover_timer,hover_timeout=3;function journalHover(e,t,o,i){o=o||!1,t=t||!1,e=e||!1,i=i||!1;var r=$(e).attr("name");if(e&&""!=r&&void 0!=r){if(r!=prev_hover_name){if(""!=prev_hover_name&&(namecache[prev_hover_name].removeClass("trhover"),void 0!=namecache_i[prev_hover_name]&&namecache_i[prev_hover_name].removeClass("trhover")),void 0==namecache[r]&&(o?namecache[r]=$('td[name="'+r+'"]'):(namecache[r]=$("div.cells").children('div.cell[name="'+r+'"]'),namecache_i[r]=$("i.cells").children('div.cell[name="'+r+'"]'))),o)namecache[r].addClass("trhover");else{var n;n=$("div.cells_num").length>0?2:1;var l=0;namecache[r].each(function(e,t){var o,i=$(this.parentNode),a=i.attr("mt_id"),s=void 0==a||a==current_mtype||"null"==current_mtype||void 0==current_mtype||i.hasClass("skip");o=current_mtype>0&&s?l++:e,s&&(o<=n||o>=scroll_position+n-1&&o<=scroll_position+scroll_display+n-1||o>=scrollbar_max+scroll_display+n)&&($(t).addClass("trhover"),isExpanded&&$(namecache_i[r][e]).addClass("trhover"))})}$(".rep_num,.rep_per").removeClass("trhover"),prev_hover_name=r}}else""!=prev_hover_name&&(void 0!=namecache[prev_hover_name]&&namecache[prev_hover_name].removeClass("trhover"),void 0!=namecache_i[prev_hover_name]&&namecache_i[prev_hover_name].removeClass("trhover")),prev_hover_name=""}function journalSelect(e,t){if(t=t||!1,e=e||!1,$("#user_note_editor").hide(),$(".trselect").removeClass("trselect"),e)if(t)$(e).addClass("trselect");else{var o=$(e).attr("name");if(""==o||void 0==o){var i=$(e).find("input").get(0);if(!i)return;o=i.name}$("div.cell[name='"+o+"']").addClass("trselect")}}var cell_size=32,swidth=900,width_fio_min=220,noMarkTypes=!1,markTypeAttr="mt_id",scrollt,scrolli;function journalSetScrollerW(e,t){e||(e=window.curgrp);var o=window.current_mtype,i=o,r=$("#g"+e+"_mtypes");r.length>0&&(o=$("#g"+e+"_mtypes").val());var n=$("#g"+e+"_marks_header, #g"+e+"_marks"),l=$(n[0]),a=$(n[1]);if("null"!=o&&null!=o&&void 0!=o&&o>=0){var s="["+markTypeAttr+"="+o+"]";$("#g"+e+"_marks").find("div"+s).length>0?(markType="["+markTypeAttr+"="+o+"]",notMarkType="["+markTypeAttr+"!="+o+"]",i!=o&&(window.first_run=!0,markTypeSwitch=!0),l.find(".megadate").addClass("megadate--fixw")):(r.val(i),o=i,alert(window.errormsg_type,!0))}else markType="",notMarkType="",l.find(".megadate").removeClass("megadate--fixw");window.first_run&&(scroll_length=0,scroll_position=0,scroll_display=0,scrollbar_step=0,scrollbar_max=0,width_fio=0,width_scroll=0,$("#g"+e+"_fio_header,#g"+e+"_fio,#g"+e+"_scroller,#g"+e+"_scroller_header").removeAttr("style"),o>=0&&(n.children("div"+notMarkType).hideClassy(),n.children("div"+markType).showClassy())),alwaysSeenNum=void 0!=markType&&""!=markType?l.children(".cells-always-show"+markType).length:0,scroll_length=l.children("div"+markType+",i.cells_visible").length;var c=$("#g"+e+"_num").width()||0,d=($("#g0_rb").width()||0)+($("#g0_ru").width()||0)+($("#g0_rn").width()||0),u=$("#right_scroll_header_"+e).width()||0;if(first_run)width_fio=$("#g"+e+"_fio").width()||0;else{var h=$("#g"+e+"_fio").width()||0;h>width_fio&&(width_fio=h)}width_fio<width_fio_min&&(width_fio=width_fio_min),$("#g"+e+"_fio_header,#g"+e+"_fio").width(width_fio-1),width_scroll=void 0!==window.scrollwidth?window.scrollwidth:swidth,width_scroll+=-c-width_fio-u+d,width_scroll-=width_scroll%cell_size;var f,p=0;return p=window.hometask_journal||window.extday_journal||window.cw_codifier_journal||window.noMarkTypes?a.children("div.cells,i.cells.cells_hidden.cells_visible").length:o>0?cmarks[e][o]:cmarks[e].all,width_scroll=Math.min(width_scroll,p*cell_size),scroll_display=width_scroll/cell_size,scroll_display-=alwaysSeenNum,scroll_length-=alwaysSeenNum,width_scroll<=504&&(window.hometask_journal||window.cw_codifier_journal)?$("#g"+e+"_scroller,#g"+e+"_scroller_header").width(504):$("#g"+e+"_scroller,#g"+e+"_scroller_header").width(width_scroll),scroll_display<scroll_length?($("#left_scroll_header_"+e+",#lscroll"+e+",#right_scroll_header_"+e+",#rscroll"+e+",#scrollbar_container").show(),first_run&&(scroll_position=scroll_length-scroll_display),scrollbar_max=scroll_length-scroll_display,scrollbar_step=Math.round(scroll_display/scroll_length*cell_size),$("#scrollbar_container").show().css("marginLeft",c+width_fio-3+(showExt?cell_size:0)).width(width_scroll+3),$("#scrollbar_container ej-slider").prop("max",scrollbar_max).val(scroll_position).off("change").on("change",function(){var e=parseInt(this.value,10);this.scroll_position!=e&&(window.journalScroll(e),window.scroll_position=e)})):($("#lscroll"+e+", #rscroll"+e).hide(),$("#scrollbar_container").hide()),scroll_length>=scroll_display&&(f=c+width_fio+width_scroll-1+(showExt?cell_size:0)),journalSetShadow(e,f),curgrp=e,void 0==t&&(t=scroll_length-scroll_display),journalScroll(t),!0}function journalSetShadow(e,t){var o=0;void 0!=t&&0!=t?o=t:$("#g"+e+"_journal_header").children("[id]:not(.cells_right_scroll_header)").filter(":visible").each(function(){o+=$(this).width()}),$("#table_header_shadow").width(o)}function journalScrollerSize(e){var t=$("#table_header_shadow"),o=$("#g"+curgrp+"_scroller").width();e?o+=cell_size:o-=cell_size,$("#g"+curgrp+"_scroller").width(o),$("#g"+curgrp+"_scroller_header").width(o),o=t.width(),e?o+=cell_size:o-=cell_size,t.width(o)}var scrollcheck=!1;function journalScrollDown(e){scrollcheck=!0,journalScrollDirection(e)&&(scrolli=setTimeout(journalScrollDown(e),50))}function journalScrollUp(e){scrollcheck?scrollcheck=!1:journalScrollDirection(e),clearTimeout(scrolli),clearTimeout(scrollt)}var curgrp=0;function journalScroll(e){window.Grid&&window.Grid.scrollTo(e);var t=$("#g"+curgrp+"_marks_header, #g"+curgrp+"_marks"),o=0,i=$(t.get(0)).children("i.cells_visible, div.cells"+markType),r=$(t.get(1)).children("i.cells_visible, div.cells"+markType);o=void 0!=markType&&""!=markType?i.filter(".cells-always-show").length:0,(window.hometask_journal||window.cw_codifier_journal)&&isExpanded&&($(".hometask_common").hideClassy(),$(".hometask_file").showClassy(),$(".hometask_num").removeClass("cell_hometask_content__high"),e+scroll_display>scroll_length?e=scroll_length-scroll_display:e<0&&(e=0),isExpanded=!1),o>0&&(i=i.filter(":not(.cells-always-show)"),r=r.filter(":not(.cells-always-show)")),e+scroll_display<=scroll_length&&e>=0?(t.children("i:not(.cells_visible)").attr("style","display:none"),scroll_position=e,$("#user_note_editor").attr("style","display:none"),i.each(function(t){var o=$(this);if(o.is("div.cells")||o.is("i.cells_visible")){var i=e<=t&&e+scroll_display>t?"block":"none";o.css("display",i),$(r[t]).css("display",i)}})):scroll_length<=scroll_display&&(i.filter("div"+markType+",i.cells_visible").show(),r.filter("div"+markType+",i.cells_visible").show()),o>0&&t.children(".cells-always-show"+markType).css("display","block"),$("#scrollbar_container ej-slider").toggleClassy(scroll_length<=scroll_display).val(scroll_position)}function journalScrollDirection(e){var t=scroll_position+e;return journalScroll(t),window.Context.hide(),void 0!=active_cell&&(active_cell.removeClass("cell_load_edit"),active_cell=void 0),t==scroll_position}var isCS=!1,isPercent=!1,isRating=!1,isTen=!1,roundTo=2,used;function setMultipleSelect(e,t,o,i,r,n,l,a){var s=$("#"+e),c=$("#"+t),d=$("#"+o),u=$("#"+i);n==r&&(u.addClass("disabled"),c.prop("disabled",!0)),c.on("change",function(){var e=c.val();d.toggleClass("disabled",void 0==e||""==e),u.toggleClass("disabled",void 0==e||""==e)}),$("#"+e+" > a").on("click",function(e){e.preventDefault();var t=$(this),o=t.attr("name");t.addClass("hide"),c.find('option[value="'+o+'"]').prop("disabled",!1),c.prop("disabled",!1).val("").trigger("change"),u.removeClass("disabled"),a(o)}),d.on("click",function(e){e.preventDefault();var t=c.val();if(void 0==t||""==t)return!1;s.find('a[name="'+t+'"]').removeClass("hide"),c.find('option[value="'+t+'"]').prop("disabled",!0),c.val("").trigger("change");var o=s.find("a").not(".hide").length;u.toggleClass("disabled",o>=r),c.prop("disabled",o>=r),o>=r&&(d.addClass("disabled"),c.val("")),l(t)}),u.on("click",function(e){return e.preventDefault(),!u.hasClass("disabled")&&(s.find("a.hide").each(function(){var e=$(this),t=e.attr("name");e.removeClass("hide"),c.find('option[value="'+t+'"]').prop("disabled",!0),l(t)}),d.addClass("disabled"),u.addClass("disabled"),c.prop("disabled",!0).val(""),!1)}),c.decorateSelect()}function extToCss(e){return e=e.split(".").pop(),ext={doc:"doc",docx:"doc",xls:"xls",xlsx:"xls",pdf:"pdf",jpg:"jpg",jpeg:"jpg",gif:"jpg",bmp:"jpg",png:" jpg",tiff:"jpg",rar:"rar",zip:"zip",txt:"att"}[e],ext||"att"}function getCaretPosition(e){if(e.selectionStart)return e.selectionStart;if(!document.selection)return 0;var t,o=document.selection.createRange(),i=o.duplicate();return i.moveToElementText(e),o.text="",t=i.text.indexOf(""),o.moveStart("character",-1),o.text="",t}function getJournalElementFromEvent(e){var t=e.target||e.srcElement;return t.classList.contains("cell")||(t=$(t).parents(".cell").first().get(0)),void 0!=t&&0!=t&&t.parentElement.classList.contains("backdate")&&alert(intl.get("Period setting marks is limited")),!(void 0==t||0==t||"DIV"!=t.nodeName||t.classList.contains("cells")||(t.classList.contains("cell_inactive")||t.classList.contains("cell--locked"))&&!t.classList.contains("editable")&&""!==window.bmark||t.classList.contains("td1")||t.parentElement.classList.contains("backdate"))&&t}function isValidUrl(e){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}function journalIdSelectorForGroups(e,t){void 0!=t&&null!==t&&!1!==t||(t=window.grps),t instanceof Array||(t=t instanceof Object?Object.values(t):[t]),e instanceof Array||(e=e instanceof Object?Object.values(e):[e]);var o=[];return e.forEach(function(e){t.forEach(function(t){o.push("#g"+t+"_"+e)})}),o.join(",")}function filterStringForId(e){if(void 0!=e)return e.replace(/#|\.|\,| |>/gi,"_").replace(/_{1,}/gi,"_")}var ExtDay={activate_but:function(e){$("#save").prop("disabled",!e).toggleClass("button--red",e),$("#save-block").toggle(e)}};function journalMarkTemplate(e,t,o,i,r){return e=void 0===e||null===e||!1===e?"":e.toString().toLowerCase().trim(),t=t||"",o=o||"",i=i||"",r=r||"",""!=e&&"&nbsp;"!==e||"н"!==r||(e="Н",r=""),'<div class="cell-data">'+e+'</div><div class="cell-corner-1">'+t+'</div><div class="cell-corner-2">'+o+'</div><div class="cell-corner-3">'+i+'</div><div class="cell-corner-4">'+r+"</div>"}var classOrLessonProhibitSymbols=["/","+","=",'"',"'"];RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};var hexcase=0,b64pad="";function hex_md5(e){return rstr2hex(rstr_md5(str2rstr_utf8(e)))}function b64_md5(e){return rstr2b64(rstr_md5(str2rstr_utf8(e)))}function any_md5(e,t){return rstr2any(rstr_md5(str2rstr_utf8(e)),t)}function hex_hmac_md5(e,t){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))}function b64_hmac_md5(e,t){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))}function any_hmac_md5(e,t,o){return rstr2any(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)),o)}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}function rstr_hmac_md5(e,t){var o=rstr2binl(e);o.length>16&&(o=binl_md5(o,8*e.length));for(var i=Array(16),r=Array(16),n=0;n<16;n++)i[n]=909522486^o[n],r[n]=1549556828^o[n];var l=binl_md5(i.concat(rstr2binl(t)),512+8*t.length);return binl2rstr(binl_md5(r.concat(l),640))}function rstr2hex(e){for(var t,o=hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<e.length;r++)t=e.charCodeAt(r),i+=o.charAt(t>>>4&15)+o.charAt(15&t);return i}function rstr2b64(e){for(var t="",o=e.length,i=0;i<o;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<o?e.charCodeAt(i+1)<<8:0)|(i+2<o?e.charCodeAt(i+2):0),n=0;n<4;n++)8*i+6*n>8*e.length?t+=b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-n)&63);return t}function rstr2any(e,t){var o,i,r,n,l,a=t.length,s=Array(Math.ceil(e.length/2));for(o=0;o<s.length;o++)s[o]=e.charCodeAt(2*o)<<8|e.charCodeAt(2*o+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),d=Array(c);for(i=0;i<c;i++){for(l=Array(),n=0,o=0;o<s.length;o++)n=(n<<16)+s[o],n-=(r=Math.floor(n/a))*a,(l.length>0||r>0)&&(l[l.length]=r);d[i]=n,s=l}var u="";for(o=d.length-1;o>=0;o--)u+=t.charAt(d[o]);return u}function str2rstr_utf8(e){for(var t,o,i="",r=-1;++r<e.length;)t=e.charCodeAt(r),o=r+1<e.length?e.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t=65536+((1023&t)<<10)+(1023&o),r++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function str2rstr_utf16le(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(255&e.charCodeAt(o),e.charCodeAt(o)>>>8&255);return t}function str2rstr_utf16be(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)>>>8&255,255&e.charCodeAt(o));return t}function rstr2binl(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t}function binl2rstr(e){for(var t="",o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t}function binl_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,i=-271733879,r=-1732584194,n=271733878,l=0;l<e.length;l+=16){var a=o,s=i,c=r,d=n;i=md5_ii(i=md5_ii(i=md5_ii(i=md5_ii(i=md5_hh(i=md5_hh(i=md5_hh(i=md5_hh(i=md5_gg(i=md5_gg(i=md5_gg(i=md5_gg(i=md5_ff(i=md5_ff(i=md5_ff(i=md5_ff(i,r=md5_ff(r,n=md5_ff(n,o=md5_ff(o,i,r,n,e[l+0],7,-680876936),i,r,e[l+1],12,-389564586),o,i,e[l+2],17,606105819),n,o,e[l+3],22,-1044525330),r=md5_ff(r,n=md5_ff(n,o=md5_ff(o,i,r,n,e[l+4],7,-176418897),i,r,e[l+5],12,1200080426),o,i,e[l+6],17,-1473231341),n,o,e[l+7],22,-45705983),r=md5_ff(r,n=md5_ff(n,o=md5_ff(o,i,r,n,e[l+8],7,1770035416),i,r,e[l+9],12,-1958414417),o,i,e[l+10],17,-42063),n,o,e[l+11],22,-1990404162),r=md5_ff(r,n=md5_ff(n,o=md5_ff(o,i,r,n,e[l+12],7,1804603682),i,r,e[l+13],12,-40341101),o,i,e[l+14],17,-1502002290),n,o,e[l+15],22,1236535329),r=md5_gg(r,n=md5_gg(n,o=md5_gg(o,i,r,n,e[l+1],5,-165796510),i,r,e[l+6],9,-1069501632),o,i,e[l+11],14,643717713),n,o,e[l+0],20,-373897302),r=md5_gg(r,n=md5_gg(n,o=md5_gg(o,i,r,n,e[l+5],5,-701558691),i,r,e[l+10],9,38016083),o,i,e[l+15],14,-660478335),n,o,e[l+4],20,-405537848),r=md5_gg(r,n=md5_gg(n,o=md5_gg(o,i,r,n,e[l+9],5,568446438),i,r,e[l+14],9,-1019803690),o,i,e[l+3],14,-187363961),n,o,e[l+8],20,1163531501),r=md5_gg(r,n=md5_gg(n,o=md5_gg(o,i,r,n,e[l+13],5,-1444681467),i,r,e[l+2],9,-51403784),o,i,e[l+7],14,1735328473),n,o,e[l+12],20,-1926607734),r=md5_hh(r,n=md5_hh(n,o=md5_hh(o,i,r,n,e[l+5],4,-378558),i,r,e[l+8],11,-2022574463),o,i,e[l+11],16,1839030562),n,o,e[l+14],23,-35309556),r=md5_hh(r,n=md5_hh(n,o=md5_hh(o,i,r,n,e[l+1],4,-1530992060),i,r,e[l+4],11,1272893353),o,i,e[l+7],16,-155497632),n,o,e[l+10],23,-1094730640),r=md5_hh(r,n=md5_hh(n,o=md5_hh(o,i,r,n,e[l+13],4,681279174),i,r,e[l+0],11,-358537222),o,i,e[l+3],16,-722521979),n,o,e[l+6],23,76029189),r=md5_hh(r,n=md5_hh(n,o=md5_hh(o,i,r,n,e[l+9],4,-640364487),i,r,e[l+12],11,-421815835),o,i,e[l+15],16,530742520),n,o,e[l+2],23,-995338651),r=md5_ii(r,n=md5_ii(n,o=md5_ii(o,i,r,n,e[l+0],6,-198630844),i,r,e[l+7],10,1126891415),o,i,e[l+14],15,-1416354905),n,o,e[l+5],21,-57434055),r=md5_ii(r,n=md5_ii(n,o=md5_ii(o,i,r,n,e[l+12],6,1700485571),i,r,e[l+3],10,-1894986606),o,i,e[l+10],15,-1051523),n,o,e[l+1],21,-2054922799),r=md5_ii(r,n=md5_ii(n,o=md5_ii(o,i,r,n,e[l+8],6,1873313359),i,r,e[l+15],10,-30611744),o,i,e[l+6],15,-1560198380),n,o,e[l+13],21,1309151649),r=md5_ii(r,n=md5_ii(n,o=md5_ii(o,i,r,n,e[l+4],6,-145523070),i,r,e[l+11],10,-1120210379),o,i,e[l+2],15,718787259),n,o,e[l+9],21,-343485551),o=safe_add(o,a),i=safe_add(i,s),r=safe_add(r,c),n=safe_add(n,d)}return Array(o,i,r,n)}function md5_cmn(e,t,o,i,r,n){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(i,n)),r),o)}function md5_ff(e,t,o,i,r,n,l){return md5_cmn(t&o|~t&i,e,t,r,n,l)}function md5_gg(e,t,o,i,r,n,l){return md5_cmn(t&i|o&~i,e,t,r,n,l)}function md5_hh(e,t,o,i,r,n,l){return md5_cmn(t^o^i,e,t,r,n,l)}function md5_ii(e,t,o,i,r,n,l){return md5_cmn(o^(t|~i),e,t,r,n,l)}function safe_add(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function bit_rol(e,t){return e<<t|e>>>32-t}var startPosition=0,height=0,endPosition=0,one_height=36,heightContainer=0,posMode=0,debug=!1,scroll_length=0,scroll_position=0,scroll_display=0,scrollbar_step=0,scrollbar_max=0,first_run=!0,width_fio=0,width_scroll=0,isExpanded=!1,isExpandedCw=!1,hometask_journal=!1,extday_journal=!1,extday_pay_journal=!1,showExt=!1,templateScroll=!0,note_username="",current_mtype=null,markType="",notMarkType="",markTypeSwitch=!1,user_role="anonymous",user_role_old="anonymous",active_cell=void 0,doubleClickIntervalSec=10,attrAutocompleteOffValue="never",attrAutocompleteOffType="text",attrAutocompleteOff='autocomplete="'+attrAutocompleteOffValue+window.guidGenerator().substr(0,8)+'"';window.addEventListener("load",function(){if(window.$){var e=window.isMobile&&window.isMobile(),t=$(document.documentElement);$.fn.datepickerField&&($("input.datepicker,input.is-eljur-date").datepickerField(),$("input.datepicker-year,input.is-eljur-dateyear").datepickerField({showYear:!0})),$.fn.decorateSelect&&($("select.is-eljur-select").decorateSelect(),$("select.is-eljur-select-hover").decorateSelect({hover:!e}),$("select.is-eljur-select-hover-href").decorateSelect({hover:!e,redirect:!0})),$.fn.checkboxSlider&&$(".eljur-for-checkbox-slider").checkboxSlider(),$.fn.disableBlock&&$(".disable-block").disableBlock(),$.fn.inputNumber&&$(".is-input-number").inputNumber(),$.fn.eljurtabs&&$("#navigation-tabs").find(".navigation-tabs__items").eljurtabs(),$.fn.tooltip&&$(".with-tooltip, .tooltip-title, .widget__tooltip").tooltip(),$.fn.eljurAccordion&&$(".ej-accordions").eljurAccordion(),$.fn.autocompleteOff&&$('form[autocomplete="off"] input[type="text"],input[type="text"][autocomplete="off"]').autocompleteOff(),$(".b-href-outer").on("click touch",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data("href");null!=t&&void 0!=t&&""!=t||(t=$(this).find("a").first().attr("href")),t&&(window.location.href=t)}),$("body").on("click touch","a",function(){var e=$(this),t=$._data(this).events;function o(){return e.is('[href="#"]')||e.is(".has-modal")||e.is("[has-modal]")||e.is("[onclick]")||t&&t.length>0&&!0!==e.data("rpcControlExit")||t&&t.length>1&&!0===e.data("rpcControlExit")}t=t?t.click:void 0,o()||(e.on("click touch",function(e){o()||e.preventDefault()}),setTimeout(function(){e.off("click touch")},1e3*window.doubleClickIntervalSec||1e3))}),$(".add-context[data-context], .with_context[data-context]").each(function(){var e=this,t=$(this),o=t.data("context");if(o&&o.length>0){var i=document.getElementById("top_nav").contains(e),r={html:o,color:i?"black":"white",dropdown:!0,closable:!1,isFixed:$("body").hasClass("body--fixed")&&i,timeout:0};t.off("click.context, touch.context").on("click.context, touch.context",function(){Context.toggle(e,r)}),i&&Context.hover(e,r)}}),$("#mainmenu .triangle:not([id])").off("click touch").on("click touch",function(){Context.toggle(this.parentNode,{id:"mainmenu_context_all",alignHorizontal:"left",topfix:1,dropdown:!0,color:"black"})}),$("#attach_resource").off("click touch").on("click touch",function(e){e.preventDefault(),window.Modals&&window.Modals.showResources()}),$.fn.addModal&&($(".ajax-modal,.ajax").addModal(),$(".ajax_ht").addModal({tall:!0,wide:!0,mode:"hometask",footer:!1,onClose:function(){$("#tabs").remove(),window.allTasks=null,window.allPresets=null}}),$("a.ajax_agreement").addModal({height:500,width:970,footer:!1,white:!0,iframe:!0,title:"Пользовательское соглашение"}),$("a.ajax_markprint").addModal({tall:!0,footer:!1,white:!0}),$("a.printjournal").addModal({footer:!1,tall:!0,wide:!0,keyboardEscape:!0}),$("a.ajax-promo-login, #ajax-promo-login").addModal({footer:!1,scroll:!0,width:500}),$(".cw_analyse").not(".cw_analyse--gc").addModal({footer:!1,white:!0,width:940,height:640}),$("#add_calendar").addModal({width:400,height:140,footer:!0}),$("#teacher-rebuke-icon, #teacher-rebuke-list").addModal({footer:!1,white:!0,width:480})),t.trigger("onloadJsReady").trigger("onLoadJsReady"),$(window).on("popstate",function(e){-1===location.href.indexOf("#")&&window.location&&window.location.href!=location.href&&(window.location=location.href)})}});